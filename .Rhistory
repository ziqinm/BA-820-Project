as.numeric(factor(textCol$BsmtCond))[397:399]
textCol$BsmtCond[397:399]
# BsmtCond: TA = 4, Gd = 2, FA = 1, Po = 3, NA = 0
textCol$BsmtCond = as.numeric(factor(textCol$BsmtCond))
replace_na(textCol$BsmtCond, 0)
glimpse(textCol)
unique(textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("GLQ", 6, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("ALQ", 5, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("BLQ", 4, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("Rec", 3, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("LwQ", 2, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("Unf", 1, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("NA", 0, textCol$BsmtFinType1)
textCol$BsmtFinType1
skim(textCol$BsmtFinType1)
train_orig$BsmtFinType1
factor(train_orig$LotShape)
as.numeric(factor(train_orig$LotShape))
class(textCol$LotShape)
# BsmtFinType2
unique(textCol$BsmtFinType2)
skim(textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("GLQ", 6, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("ALQ", 5, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("BLQ", 4, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("Rec", 3, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("LwQ", 2, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("Unf", 1, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("NA", 0, textCol$BsmtFinType2)
# Electrical
unique(textCol$Electrical)
textCol$Electrical = gsub("SBrkr", 5, textCol$Electrical)
textCol$Electrical = gsub("FuseA", 4, textCol$Electrical)
textCol$Electrical = gsub("FuseF", 3, textCol$Electrical)
textCol$Electrical = gsub("FuseP", 2, textCol$Electrical)
textCol$Electrical = gsub("Mix", 1, textCol$Electrical)
# Functional
unique(textCol$Functional)
# GarageFinish
unique(textCol$GarageFinish)
textCol$GarageFinish = gsub("RFn", 3, textCol$GarageFinish)
textCol$GarageFinish = gsub("Fin", 2, textCol$GarageFinish)
textCol$GarageFinish = gsub("Unf", 1, textCol$GarageFinish)
textCol$GarageFinish = gsub("NA", 0, textCol$GarageFinish)
# PavedFrive:
unique(textCol$PavedFrive)
# PavedDrive:
unique(textCol$PavedDrive)
textCol$PavedDrive = gsub("Y", 3, textCol$PavedDrive)
textCol$PavedDrive = gsub("P", 2, textCol$PavedDrive)
textCol$PavedDrive = gsub("N", 1, textCol$PavedDrive)
# PoolQC:
unique(textCol$PoolQC)
unique(textCol$BsmtExposure)
textCol$BsmtExposure
as.numeric(factor(textCol$BsmtExposure))[991:1000]
as.numeric(factor(textCol$BsmtExposure))[983:985]
# BsmtExposure: No = 4, Mn = 3, Gd = 2, Av = 1, NA = 0
textCol$BsmtExposure = as.numeric(factor(textCol$BsmtExposure))
replace_na(textCol$BsmtExposure, 0)
unique(textCol$HeatingQC)
textCol$HeatingQC
as.numeric(factor(textCol$HeatingQC))[991:1000]
str_locate(textCol$HeatingQC, "Po")
as.numeric(factor(textCol$HeatingQC))[325:327]
# HeatingQC: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4
textCol$HeatingQC = as.numeric(factor(textCol$HeatingQC))
as.numeric(factor(textCol$CentralAir))
textCol$CentralAir
# CentralAir: Y = 2, N = 1
textCol$CentralAir = as.numeric(factor(textCol$CentralAir))
unique(textCol$KitchenQual)
textCol$KitchenQual
as.numeric(factor(textCol$KitchenQual))[977:979]
as.numeric(factor(textCol$KitchenQual))[995]
# KitchenQual:  Ex = 1, TA = 4, Gd = 3, FA = 2
textCol$KitchenQual = as.numeric(factor(textCol$KitchenQual))
unique(textCol$FireplaceQu)
# FireplaceQu: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$FireplaceQu = as.numeric(factor(textCol$FireplaceQu))
textCol$FireplaceQu
replace_na(textCol$FireplaceQu, 0)
unique(textCol4)
unieuq(textCol$GarageQual)
unique(textcol$G)
unique(textCol$GarageQual)
# GarageQual: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageQual = as.numeric(factor(textCol$GarageQual))
# GarageQual: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageQual = as.numeric(factor(textCol$GarageQual))
replace_na(textCol$GarageQual, 0)
unique(textCol$GarageCond)
# GarageCond: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageCond = as.numeric(factor(textCol$GarageCond))
replace_na(textCol$GarageCond, 0)
unique(textCoL$PoolQC)
unique(textCol$PoolQC)
textCol$PoolQC
as.numeric(factor(textCol$PoolQC))[811]
textCol$PoolQC[1001:1460]
as.numeric(factor(textCol$PoolQC))[1424]
# PoolQC: Ex = 1, Fa = 2, Gd = 3, NA = 0
textCol$PoolQC = as.numeric(factor(textCol$PoolQC))
glimpse(textCol)
replace_na(textCol$FireplaceQu, 0)
glimpse(textCol)
textCol$FireplaceQu
replace_na(textCol$FireplaceQu, 0)
textCol$FireplaceQu
# FireplaceQu: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$FireplaceQu = as.numeric(factor(textCol$FireplaceQu))
replace_na(textCol$FireplaceQu, 0)
textCol$FireplaceQu = replace_na(textCol$FireplaceQu, 0)
textCol$FireplaceQu
glimpse(textCol)
,
cateName = c("MSZoning", "Street", "LandContour", "LotConfig", "Neighborhood", "Condition1",
"Condition2", "BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "Foundation", "Heating", "Functional", "GarageType",
"SaleType", "SaleCondition", "Alley")
### Convert rank categories to scales for EFA ###
## Systematically factored:
# LotShape: Reg = 4, IR1 = 3, IR2 = 2, IR1 = 1
textCol$LotShape = as.numeric(factor(textCol$LotShape))
# LandDlope: Gtl = 1, Mod = 2, Sev = 3
textCol$LandSlope = as.numeric(factor(textCol$LandSlope))
# ExterQual: Ex = 1, Gd = 3, TA = 4, Fa = 2
textCol$ExterQual = as.numeric(factor(textCol$ExterQual))
# ExterCond: TA = 5, Gd = 3, Fa = 2, Po = 4, Ex = 1
textCol$ExterCond = as.numeric(factor(textCol$ExterCond))
# BsmtQual: Ex = 1, TA = 4, Gd = 3, FA = 2, NA = 0
textCol$BsmtQual = as.numeric(factor(textCol$BsmtQual))
textCol$BsmtQual = replace_na(textCol$BsmtQual, 0)
# BsmtCond: TA = 4, Gd = 2, FA = 1, Po = 3, NA = 0
textCol$BsmtCond = as.numeric(factor(textCol$BsmtCond))
textCol$BsmtCond = replace_na(textCol$BsmtCond, 0)
# BsmtExposure: No = 4, Mn = 3, Gd = 2, Av = 1, NA = 0
textCol$BsmtExposure = as.numeric(factor(textCol$BsmtExposure))
textCol$BsmtExposure = replace_na(textCol$BsmtExposure, 0)
# HeatingQC: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4
textCol$HeatingQC = as.numeric(factor(textCol$HeatingQC))
# CentralAir: Y = 2, N = 1
textCol$CentralAir = as.numeric(factor(textCol$CentralAir))
# KitchenQual:  Ex = 1, TA = 4, Gd = 3, FA = 2
textCol$KitchenQual = as.numeric(factor(textCol$KitchenQual))
# FireplaceQu: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$FireplaceQu = as.numeric(factor(textCol$FireplaceQu))
textCol$FireplaceQu = replace_na(textCol$FireplaceQu, 0)
# GarageQual: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageQual = as.numeric(factor(textCol$GarageQual))
textCol$GarageQual = replace_na(textCol$GarageQual, 0)
# GarageCond: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageCond = as.numeric(factor(textCol$GarageCond))
textCol$GarageCond = replace_na(textCol$GarageCond, 0)
# PoolQC: Ex = 1, Fa = 2, Gd = 3, NA = 0
textCol$PoolQC = as.numeric(factor(textCol$PoolQC))
glimpse(textCol)
# Remove `SalePrice` column
train = train_orig %>%
select(-SalePrice)
### Extract text columns ###
textName = c("MSZoning", "Street", "LotShape", "LandContour", "Utilities",
"LotConfig", "LandSlope", "Neighborhood", "Condition1", "Condition2",
"BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "ExterQual", "ExterCond", "Foundation",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"Heating", "HeatingQC", "CentralAir", "Electrical", "KitchenQual",
"Functional", "FireplaceQu", "GarageType", "GarageFinish", "GarageQual",
"GarageCond", "PavedDrive", "PoolQC", "Fence", "MiscFeature",
"SaleType", "SaleCondition", "Alley")
textCol = train %>% select(textName)
glimpse(textCol)
### Convert rank categories to scales for EFA ###
## Systematically factored:
# LotShape: Reg = 4, IR1 = 3, IR2 = 2, IR1 = 1
textCol$LotShape = as.numeric(factor(textCol$LotShape))
# LandDlope: Gtl = 1, Mod = 2, Sev = 3
textCol$LandSlope = as.numeric(factor(textCol$LandSlope))
textCol$ExterQual = as.numeric(factor(textCol$ExterQual))
# ExterCond: TA = 5, Gd = 3, Fa = 2, Po = 4, Ex = 1
textCol$ExterCond = as.numeric(factor(textCol$ExterCond))
# BsmtQual: Ex = 1, TA = 4, Gd = 3, FA = 2, NA = 0
textCol$BsmtQual = as.numeric(factor(textCol$BsmtQual))
textCol$BsmtQual = replace_na(textCol$BsmtQual, 0)
# BsmtCond: TA = 4, Gd = 2, FA = 1, Po = 3, NA = 0
textCol$BsmtCond = as.numeric(factor(textCol$BsmtCond))
textCol$BsmtCond = replace_na(textCol$BsmtCond, 0)
# BsmtExposure: No = 4, Mn = 3, Gd = 2, Av = 1, NA = 0
textCol$BsmtExposure = as.numeric(factor(textCol$BsmtExposure))
textCol$BsmtExposure = replace_na(textCol$BsmtExposure, 0)
# HeatingQC: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4
textCol$HeatingQC = as.numeric(factor(textCol$HeatingQC))
# CentralAir: Y = 2, N = 1
textCol$CentralAir = as.numeric(factor(textCol$CentralAir))
# KitchenQual:  Ex = 1, TA = 4, Gd = 3, FA = 2
textCol$KitchenQual = as.numeric(factor(textCol$KitchenQual))
# FireplaceQu: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$FireplaceQu = as.numeric(factor(textCol$FireplaceQu))
textCol$FireplaceQu = replace_na(textCol$FireplaceQu, 0)
# GarageQual: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageQual = as.numeric(factor(textCol$GarageQual))
textCol$GarageQual = replace_na(textCol$GarageQual, 0)
# GarageCond: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textCol$GarageCond = as.numeric(factor(textCol$GarageCond))
textCol$GarageCond = replace_na(textCol$GarageCond, 0)
# PoolQC: Ex = 1, Fa = 2, Gd = 3, NA = 0
textCol$PoolQC = as.numeric(factor(textCol$PoolQC))
textCol$PoolQC = replace_na(textCol$PoolQC, 0)
glimpse(textCol)
## Manually factored:
# Utilities: AllPub = 4, NoSewr = 3, NoSeWa = 2, ELO = 1
# unique(textCol$Utilities)
textCol$Utilities = gsub("AllPub", 4, textCol$Utilities)
textCol$Utilities = gsub("NoSeWa", 2, textCol$Utilities)
textCol$BsmtFinType1 = gsub("GLQ", 6, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("ALQ", 5, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("BLQ", 4, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("Rec", 3, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("LwQ", 2, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("Unf", 1, textCol$BsmtFinType1)
textCol$BsmtFinType1 = gsub("NA", 0, textCol$BsmtFinType1)
textCol$BsmtFinType2 = gsub("GLQ", 6, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("ALQ", 5, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("BLQ", 4, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("Rec", 3, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("LwQ", 2, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("Unf", 1, textCol$BsmtFinType2)
textCol$BsmtFinType2 = gsub("NA", 0, textCol$BsmtFinType2)
textCol$Electrical = gsub("SBrkr", 5, textCol$Electrical)
textCol$Electrical = gsub("FuseA", 4, textCol$Electrical)
textCol$Electrical = gsub("FuseF", 3, textCol$Electrical)
textCol$Electrical = gsub("FuseP", 2, textCol$Electrical)
textCol$Electrical = gsub("Mix", 1, textCol$Electrical)
textCol$Functional = gsub("Typ", 8, textCol$Functional)
textCol$Functional = gsub("Min1", 7, textCol$Functional)
textCol$Functional = gsub("Min2", 6, textCol$Functional)
textCol$Functional = gsub("Mod", 5, textCol$Functional)
textCol$Functional = gsub("Maj1", 4, textCol$Functional)
textCol$Functional = gsub("Maj2", 3, textCol$Functional)
textCol$Functional = gsub("Sev", 2, textCol$Functional)
textCol$Functional = gsub("Sal", 1, textCol$Functional)
textCol$GarageFinish = gsub("RFn", 3, textCol$GarageFinish)
textCol$GarageFinish = gsub("Fin", 2, textCol$GarageFinish)
textCol$GarageFinish = gsub("Unf", 1, textCol$GarageFinish)
textCol$GarageFinish = gsub("NA", 0, textCol$GarageFinish)
textCol$PavedDrive = gsub("Y", 3, textCol$PavedDrive)
textCol$PavedDrive = gsub("P", 2, textCol$PavedDrive)
textCol$PavedDrive = gsub("N", 1, textCol$PavedDrive)
glimpse(textCol)
categName = c("MSZoning", "Street", "LandContour", "LotConfig", "Neighborhood", "Condition1",
"Condition2", "BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "Foundation", "Heating", "Functional", "GarageType",
"SaleType", "SaleCondition", "Alley")
textChr = textCol %>%
select(categName)
textScale = textCol %>%
select(-categName)
GLIMPSE(textScale)
glimpse(textScale)
textCol = train %>% select(textName)
glimpse(textCol)
textScale = textCol %>%
select(-categName)
glimpse(textScale)
textScale = textCol %>%
select(-categName)
textScale$LotShape = as.numeric(factor(textScale$LotShape))
# LandDlope: Gtl = 1, Mod = 2, Sev = 3
textScale$LandSlope = as.numeric(factor(textScale$LandSlope))
# ExterQual: Ex = 1, Gd = 3, TA = 4, Fa = 2
textScale$ExterQual = as.numeric(factor(textScale$ExterQual))
# ExterCond: TA = 5, Gd = 3, Fa = 2, Po = 4, Ex = 1
textScale$ExterCond = as.numeric(factor(textScale$ExterCond))
# BsmtQual: Ex = 1, TA = 4, Gd = 3, FA = 2, NA = 0
textScale$BsmtQual = as.numeric(factor(textScale$BsmtQual))
textScale$BsmtQual = replace_na(textScale$BsmtQual, 0)
# BsmtCond: TA = 4, Gd = 2, FA = 1, Po = 3, NA = 0
textScale$BsmtCond = as.numeric(factor(textScale$BsmtCond))
textScale$BsmtCond = replace_na(textScale$BsmtCond, 0)
# BsmtExposure: No = 4, Mn = 3, Gd = 2, Av = 1, NA = 0
textScale$BsmtExposure = as.numeric(factor(textScale$BsmtExposure))
textScale$BsmtExposure = replace_na(textScale$BsmtExposure, 0)
# HeatingQC: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4
textScale$HeatingQC = as.numeric(factor(textScale$HeatingQC))
# CentralAir: Y = 2, N = 1
textScale$CentralAir = as.numeric(factor(textScale$CentralAir))
# KitchenQual:  Ex = 1, TA = 4, Gd = 3, FA = 2
textScale$KitchenQual = as.numeric(factor(textScale$KitchenQual))
# FireplaceQu: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textScale$FireplaceQu = as.numeric(factor(textScale$FireplaceQu))
textScale$FireplaceQu = replace_na(textScale$FireplaceQu, 0)
# GarageQual: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textScale$GarageQual = as.numeric(factor(textScale$GarageQual))
textScale$GarageQual = replace_na(textScale$GarageQual, 0)
# GarageCond: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textScale$GarageCond = as.numeric(factor(textScale$GarageCond))
textScale$GarageCond = replace_na(textScale$GarageCond, 0)
# PoolQC: Ex = 1, Fa = 2, Gd = 3, NA = 0
textScale$PoolQC = as.numeric(factor(textScale$PoolQC))
textScale$PoolQC = replace_na(textScale$PoolQC, 0)
## Manually factored:
# Utilities: AllPub = 4, NoSewr = 3, NoSeWa = 2, ELO = 1
# unique(textScale$Utilities)
textScale$Utilities = gsub("AllPub", 4, textScale$Utilities)
textScale$Utilities = gsub("NoSeWa", 2, textScale$Utilities)
# BsmtFinType1: GLQ = 6, ALQ = 5, BLQ = 4, Rec = 3, LwQ = 2, Unf = 1, NA = 0
# unique(textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("GLQ", 6, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("ALQ", 5, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("BLQ", 4, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("Rec", 3, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("LwQ", 2, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("Unf", 1, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("NA", 0, textScale$BsmtFinType1)
# BsmtFinType2: GLQ = 6, ALQ = 5, BLQ = 4, Rec = 3, LwQ = 2, Unf = 1, NA = 0
# unique(textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("GLQ", 6, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("ALQ", 5, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("BLQ", 4, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("Rec", 3, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("LwQ", 2, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("Unf", 1, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("NA", 0, textScale$BsmtFinType2)
# Electrical: SBrkr = 5, FuseA = 4, FuseF = 3, FuseP = 2, Mix = 1
# unique(textScale$Electrical)
textScale$Electrical = gsub("SBrkr", 5, textScale$Electrical)
textScale$Electrical = gsub("FuseA", 4, textScale$Electrical)
textScale$Electrical = gsub("FuseF", 3, textScale$Electrical)
textScale$Electrical = gsub("FuseP", 2, textScale$Electrical)
textScale$Electrical = gsub("Mix", 1, textScale$Electrical)
# Functional: Typ = 8, Min1 = 7, Min2 = 6, Mod = 5, Maj1 = 4, Maj2 = 3, Sev = 2, Sal = 1
# unique(textScale$Functional)
textScale$Functional = gsub("Typ", 8, textScale$Functional)
textScale$Functional = gsub("Min1", 7, textScale$Functional)
textScale$Functional = gsub("Min2", 6, textScale$Functional)
textScale$Functional = gsub("Mod", 5, textScale$Functional)
textScale$Functional = gsub("Maj1", 4, textScale$Functional)
textScale$Functional = gsub("Maj2", 3, textScale$Functional)
textScale$Functional = gsub("Sev", 2, textScale$Functional)
textScale$Functional = gsub("Sal", 1, textScale$Functional)
# GarageFinish: RFn = 3, Fin = 2, Unf = 1, NA = 0
# unique(textScale$GarageFinish)
textScale$GarageFinish = gsub("RFn", 3, textScale$GarageFinish)
textScale$GarageFinish = gsub("Fin", 2, textScale$GarageFinish)
textScale$GarageFinish = gsub("Unf", 1, textScale$GarageFinish)
textScale$GarageFinish = gsub("NA", 0, textScale$GarageFinish)
# PavedDrive: Y = 3, P = 2, N = 1
# unique(textScale$PavedDrive)
textScale$PavedDrive = gsub("Y", 3, textScale$PavedDrive)
textScale$PavedDrive = gsub("P", 2, textScale$PavedDrive)
textScale$PavedDrive = gsub("N", 1, textScale$PavedDrive)
glimpse(textScale)
categName = c("MSZoning", "Street", "LandContour", "LotConfig", "Neighborhood", "Condition1",
"Condition2", "BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "Foundation", "Heating", "Functional", "GarageType",
"SaleType", "SaleCondition", "Alley", "Fence", "MiscFeature")
textChr = textCol %>%
select(categName)
textScale = textCol %>%
select(-categName)
glimpse(textScale)
textScale$LotShape = as.numeric(factor(textScale$LotShape))
# LandDlope: Gtl = 1, Mod = 2, Sev = 3
textScale$LandSlope = as.numeric(factor(textScale$LandSlope))
# ExterQual: Ex = 1, Gd = 3, TA = 4, Fa = 2
textScale$ExterQual = as.numeric(factor(textScale$ExterQual))
# ExterCond: TA = 5, Gd = 3, Fa = 2, Po = 4, Ex = 1
textScale$ExterCond = as.numeric(factor(textScale$ExterCond))
# BsmtQual: Ex = 1, TA = 4, Gd = 3, FA = 2, NA = 0
textScale$BsmtQual = as.numeric(factor(textScale$BsmtQual))
textScale$BsmtQual = replace_na(textScale$BsmtQual, 0)
# BsmtCond: TA = 4, Gd = 2, FA = 1, Po = 3, NA = 0
textScale$BsmtCond = as.numeric(factor(textScale$BsmtCond))
textScale$BsmtCond = replace_na(textScale$BsmtCond, 0)
# BsmtExposure: No = 4, Mn = 3, Gd = 2, Av = 1, NA = 0
textScale$BsmtExposure = as.numeric(factor(textScale$BsmtExposure))
textScale$BsmtExposure = replace_na(textScale$BsmtExposure, 0)
# HeatingQC: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4
textScale$HeatingQC = as.numeric(factor(textScale$HeatingQC))
# CentralAir: Y = 2, N = 1
textScale$CentralAir = as.numeric(factor(textScale$CentralAir))
# KitchenQual:  Ex = 1, TA = 4, Gd = 3, FA = 2
textScale$KitchenQual = as.numeric(factor(textScale$KitchenQual))
# FireplaceQu: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textScale$FireplaceQu = as.numeric(factor(textScale$FireplaceQu))
textScale$FireplaceQu = replace_na(textScale$FireplaceQu, 0)
# GarageQual: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textScale$GarageQual = as.numeric(factor(textScale$GarageQual))
textScale$GarageQual = replace_na(textScale$GarageQual, 0)
# GarageCond: Ex = 1, Gd = 3, TA = 5, Fa = 2, Po = 4, NA = 0
textScale$GarageCond = as.numeric(factor(textScale$GarageCond))
textScale$GarageCond = replace_na(textScale$GarageCond, 0)
# PoolQC: Ex = 1, Fa = 2, Gd = 3, NA = 0
textScale$PoolQC = as.numeric(factor(textScale$PoolQC))
textScale$PoolQC = replace_na(textScale$PoolQC, 0)
## Manually factored:
# Utilities: AllPub = 4, NoSewr = 3, NoSeWa = 2, ELO = 1
# unique(textScale$Utilities)
textScale$Utilities = gsub("AllPub", 4, textScale$Utilities)
textScale$Utilities = gsub("NoSeWa", 2, textScale$Utilities)
# BsmtFinType1: GLQ = 6, ALQ = 5, BLQ = 4, Rec = 3, LwQ = 2, Unf = 1, NA = 0
# unique(textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("GLQ", 6, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("ALQ", 5, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("BLQ", 4, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("Rec", 3, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("LwQ", 2, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("Unf", 1, textScale$BsmtFinType1)
textScale$BsmtFinType1 = gsub("NA", 0, textScale$BsmtFinType1)
# BsmtFinType2: GLQ = 6, ALQ = 5, BLQ = 4, Rec = 3, LwQ = 2, Unf = 1, NA = 0
# unique(textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("GLQ", 6, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("ALQ", 5, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("BLQ", 4, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("Rec", 3, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("LwQ", 2, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("Unf", 1, textScale$BsmtFinType2)
textScale$BsmtFinType2 = gsub("NA", 0, textScale$BsmtFinType2)
# Electrical: SBrkr = 5, FuseA = 4, FuseF = 3, FuseP = 2, Mix = 1
# unique(textScale$Electrical)
textScale$Electrical = gsub("SBrkr", 5, textScale$Electrical)
textScale$Electrical = gsub("FuseA", 4, textScale$Electrical)
textScale$Electrical = gsub("FuseF", 3, textScale$Electrical)
textScale$Electrical = gsub("FuseP", 2, textScale$Electrical)
textScale$Electrical = gsub("Mix", 1, textScale$Electrical)
# Functional: Typ = 8, Min1 = 7, Min2 = 6, Mod = 5, Maj1 = 4, Maj2 = 3, Sev = 2, Sal = 1
# unique(textScale$Functional)
textScale$Functional = gsub("Typ", 8, textScale$Functional)
textScale$Functional = gsub("Min1", 7, textScale$Functional)
textScale$Functional = gsub("Min2", 6, textScale$Functional)
textScale$Functional = gsub("Mod", 5, textScale$Functional)
textScale$Functional = gsub("Maj1", 4, textScale$Functional)
textScale$Functional = gsub("Maj2", 3, textScale$Functional)
textScale$Functional = gsub("Sev", 2, textScale$Functional)
textScale$Functional = gsub("Sal", 1, textScale$Functional)
# GarageFinish: RFn = 3, Fin = 2, Unf = 1, NA = 0
# unique(textScale$GarageFinish)
textScale$GarageFinish = gsub("RFn", 3, textScale$GarageFinish)
textScale$GarageFinish = gsub("Fin", 2, textScale$GarageFinish)
textScale$GarageFinish = gsub("Unf", 1, textScale$GarageFinish)
textScale$GarageFinish = gsub("NA", 0, textScale$GarageFinish)
# PavedDrive: Y = 3, P = 2, N = 1
# unique(textScale$PavedDrive)
textScale$PavedDrive = gsub("Y", 3, textScale$PavedDrive)
textScale$PavedDrive = gsub("P", 2, textScale$PavedDrive)
textScale$PavedDrive = gsub("N", 1, textScale$PavedDrive)
glimpse(textScale)
nrow(scaleCol)
nrow(textScale)
scaleCol = cbind(scaleCol, textScale)
glimpse(scaleCol)
glimpse(textChr)
ncol(train_num)
ncol(train)
dim(train)
### Extract text columns ###
textName = c("MSZoning", "Street", "LotShape", "LandContour", "Utilities",
"LotConfig", "LandSlope", "Neighborhood", "Condition1", "Condition2",
"BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "ExterQual", "ExterCond", "Foundation",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"Heating", "HeatingQC", "CentralAir", "Electrical", "KitchenQual",
"Functional", "FireplaceQu", "GarageType", "GarageFinish", "GarageQual",
"GarageCond", "PavedDrive", "PoolQC", "Fence", "MiscFeature",
"SaleType", "SaleCondition", "Alley")
textCol = train %>% select(textName)
ncol(textCol)
textChar = textCol %>%
select(categName)
ncol(textChar)
ncol(textScale)
train %>% select(-textName, -scaleName) %>% glimpse() -> train_num
library(tidyverse)
library(skimr)
train_orig = read_csv("train.csv")
summary(train_orig)
glimpse(train_orig)
skim(train_orig)
ncol(train_orig)
# Remove `SalePrice` column
train = train_orig %>%
select(-SalePrice)
dim(train)
# Move `Id` to rownames, then delete
rownames(train) = train$Id
train = train %>% select(-Id)
ncol(train)
### Extract text columns ###
textName = c("MSZoning", "Street", "LotShape", "LandContour", "Utilities",
"LotConfig", "LandSlope", "Neighborhood", "Condition1", "Condition2",
"BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "ExterQual", "ExterCond", "Foundation",
"BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinType1", "BsmtFinType2",
"Heating", "HeatingQC", "CentralAir", "Electrical", "KitchenQual",
"Functional", "FireplaceQu", "GarageType", "GarageFinish", "GarageQual",
"GarageCond", "PavedDrive", "PoolQC", "Fence", "MiscFeature",
"SaleType", "SaleCondition", "Alley")
textCol = train %>% select(textName)
glimpse(textCol)
categName = c("MSZoning", "Street", "LandContour", "LotConfig", "Neighborhood", "Condition1",
"Condition2", "BldgType", "HouseStyle", "RoofStyle", "RoofMatl", "Exterior1st",
"Exterior2nd", "MasVnrType", "Foundation", "Heating", "Functional", "GarageType",
"SaleType", "SaleCondition", "Alley", "Fence", "MiscFeature")
textChar = textCol %>%
select(categName)
textScale = textCol %>%
select(-categName)
# Extraxt other numeric scale variables
train %>% select(-textName) %>% glimpse()
scaleName = c("OverallQual", "OverallCond")
train %>% select(-textName, -scaleName) %>% glimpse() -> train_num
